{% extends 'base.html' %}

{% block title %}Reportes Mensuales{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="mb-4">Reportes Mensuales</h1>
    
    <form method="get" action="{{ url_for('reportes') }}">
        <div class="row mb-4">
            <div class="col-md-6">
                <label for="mes">Mes:</label>
                <select class="form-control" id="mes" name="mes">
                    {% for i in range(1, 13) %}
                        <option value="{{ i }}" {% if i == mes %}selected{% endif %}>{{ i }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-6">
                <label for="anio">Año:</label>
                <select class="form-control" id="anio" name="anio">
                    {% for i in range(2020, 2026) %}
                        <option value="{{ i }}" {% if i == anio %}selected{% endif %}>{{ i }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Actualizar Reportes</button>
        <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">Volver al Panel</a>
    </form>

    <h2>Vendedores con más ventas</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Total Ventas</th>
            </tr>
        </thead>
        <tbody>
            {% for vendedor in vendedores %}
            <tr>
                <td>{{ vendedor[0] }}</td>
                <td>{{ vendedor[1] }}</td>
                <td>{{ vendedor[2] }}</td>
                <td>{{ vendedor[3] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <h2>Clientes Nuevos</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Fecha Registro</th>
            </tr>
        </thead>
        <tbody>
            {% for cliente in clientes_nuevos %}
            <tr>
                <td>{{ cliente[0] }}</td>
                <td>{{ cliente[1] }}</td>
                <td>{{ cliente[2] }}</td>
                <td>{{ cliente[3] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h2>Clientes con mayores compras</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Total Gastado</th>
            </tr>
        </thead>
        <tbody>
            {% for cliente in clientes_top %}
            <tr>
                <td>{{ cliente[0] }}</td>
                <td>{{ cliente[1] }}</td>
                <td>{{ cliente[2] }}</td>
                <td>${{ cliente[3] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h2>Muebles más vendidos</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Total Vendido</th>
            </tr>
        </thead>
        <tbody>
            {% for mueble in muebles_top %}
            <tr>
                <td>{{ mueble[0] }}</td>
                <td>{{ mueble[1] }}</td>
                <td>{{ mueble[2] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
